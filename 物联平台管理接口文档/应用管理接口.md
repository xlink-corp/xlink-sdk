# 应用管理接口 #

	应用管理接口为企业提供管理各种App应用API，比如：Iphone，Android等企业应用。

## 1. 接口概览 ##

1. [创建APP配置](#create_app)
2. [获得APP详细信息](#aquire_app_detail)
3. [获得APP列表](#aquire_app_list)
4. [修改APP配置](#modify_app)
5. [删除APP配置](#delete_app)
6. [附录](#appendix)

## 2. 接口详情 ##

### <a name="create_app">2.1 创建APP配置</a> ###

	创建app配置需要向服务器发起一个POST请求。

#### Request ####

	请求url、header与需要填充的content如下所示：

URL

	POST /v2/developer/app

Header

	Content-Type:"application/json"
	Access-Token:"调用凭证"

Content

	APP类型type为iphone,即是type=1时:

		{
		    "name":"APP名称",
		    "type":"APP类型",
		    "apn_enable":"APN推送是否启用",
		    "apn_license_url":"APN密钥文件地址",
		    "apn_license_pwd":"APN密钥文件密码",
		    "apn_license_production":"APN密钥文件是否为正式发布"
		}
	
	type为andriod,type=2时:
		{
		    "name":"APP名称",
		    "type":"APP类型",
			"gcm_api_key":"安卓调用推送所需要的api key"
		}
		

#### Response ####

	创建APP配置得到的响应如下所示：

Header

	HTTP/1.1 200 OK

Content

	type为iphone,type=1时返回:
		{
		    "id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
		    "apn_enable":"APN推送是否启用",
		    "apn_license_url":"APN密钥文件地址",
		    "apn_license_pwd":"APN密钥文件密码",
		    "apn_license_production":"APN密钥文件是否为正式发布",
		    "create_time":"创建时间"
		}

	type为andriod,type=2时返回:
		{
			"id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
			"android":{
				"gcm_api_key":"安卓调用推送所需要的api key",
				"gcm_enable":"gcm推送是否启用"
			}
		}
		

*Content各个字段说明如下表所示：*

字 段					|是否必须|描 述
----					|----	|----
id						|是|APP标识ID
name					|是|	APP名称，32个字符
type					|是|	APP类型，见[附录](#app_type)
apn_anable				|是|	APN推送是否启用
apn_license_url			|是|	APN密钥文件地址
apn_license_pwd			|是|	APN密钥文件密码
apn_license_production	|是|	APN密钥文件是否有正式发布，取值为true或false
create_time				|是|	创建时间，例：2015-10-09T08 : 15 : 40.843Z
gcm_api_key				|是|安卓调用推送所需要的api key
gcm_enable				|是|gcm推送是否启用

### <a name="aquire_app_detail">2.2 获取APP详细信息</a> ###

	获取APP详细信息需要发起GET请求。

#### Request ####

	请求的url与header，其中url的{app_id}为创建app配置响应的APP标识ID，后面对应的{app_id}与此一样。

URL

	GET /v2/developer/app/{app_id}

Header
	
	Content-Type:"application/json"
	Access-Token:"调用凭证"

Content
	
	无

#### Response ####

	请求获取APP详细信息的响应：

Header

	HTTP/1.1 200 OK

Content

	type为iphone,type=1时返回:
		{
		    "id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
		    "apn_enable":"APN推送是否启用",
		    "apn_license_url":"APN密钥文件地址",
		    "apn_license_pwd":"APN密钥文件密码",
		    "apn_license_production":"APN密钥文件是否为正式发布",
		    "create_time":"创建时间"
		}

	type为andriod,type=2时返回:
		{
			"id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
			"android":{
				"gcm_api_key":"安卓调用推送所需要的api key",
				"gcm_enable":"gcm推送是否启用"
			}
		}

### <a name="aquire_app_list">2.3 获取APP列表</a> ###

	获取APP列表需要向服务器发起GET请求。

#### Request ####

	请求的url与header如下：

URL
	
	GET /v2/developer/apps

Header
	
	Content-Type:"application/json"
	Access-Token:"调用凭证"

Content
	
	无

#### Response ####

	获取APP列表得到的响应如下：

Header

	HTTP/1.1 200 OK

Content

	[
		//type为iphone,type=1时返回:
	    {
	        "id":"APP的标识ID",
	        "name":"APP名称",
	        "type":"APP类型",
	        "apn_enable":"APN推送是否启用",
	        "apn_license_url":"APN密钥文件地址",
	        "apn_license_pwd":"APN密钥文件密码",
	        "apn_license_production":"APN密钥文件是否为正式发布",
	        "create_time":"创建时间"
	    },
		//type为andriod,type=2时返回:
		{
			"id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
			"android":{
				"gcm_api_key":"安卓调用推送所需要的api key",
				"gcm_enable":"gcm推送是否启用"
			}
		}
	]
		

*获取的app列表可能有多个app信息，所以这是个app的数组，解析时需要按照数组方式解析。*

### <a name="modify_app">2.4 修改APP配置</a> ###

	修改APP配置需要想服务器发起PUT请求。

#### Request ####

	发起的PUT请求url、header与填充的content如下。

URL

	PUT /v2/developer/app/{app_id}

Header

	Content-Type:"application/json"
	Access-Token:"调用凭证"

Content

	type为iphone,type=1时:
		{
		    "name":"APP名称",
		    "type":"APP类型",
		    "apn_enable":"APN推送是否启用",
		    "apn_license_url":"APN密钥文件地址",
		    "apn_license_pwd":"APN密钥文件密码",
		    "apn_license_production":"APN密钥文件是否为正式发布"
		}

	type为andriod,type=2时:
		{
		    "name":"APP名称",
		    "type":"APP类型",
			"gcm_api_key":"安卓调用推送所需要的api key",
			"gcm_enable":"gcm推送是否启用"
		}

#### Response ####

	修改APP配置收到服务器响应如下：

Header
	
	HTTP/1.1 200 OK

Content

	type为iphone,type=1时返回:
		{
		    "id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
		    "apn_enable":"APN推送是否启用",
		    "apn_license_url":"APN密钥文件地址",
		    "apn_license_pwd":"APN密钥文件密码",
		    "apn_license_production":"APN密钥文件是否为正式发布",
		    "create_time":"创建时间"
		}

	type为andriod,type=2时返回:
		{
			"id":"APP的标识ID",
		    "name":"APP名称",
		    "type":"APP类型",
			"android":{
				"gcm_api_key":"安卓调用推送所需要的api key",
				"gcm_enable":"gcm推送是否启用"
			}
		}

### <a name="delete_app">2.5 删除APP配置</a> ###

	当企业需要删除一个APP配置时，需要向服务器发起一个DELETE请求。

#### Request ####

	请求的url、Header分别如下。

URL

	DELETE /v2/developer/app/{app_id}

Header

	Content-Type:"application/json"
	Access-Token:"调用凭证"

Content

	无

#### Response ####

Header

	HTTP/1.1 200 OK

Content

	无

## <a name="appendix">3. 附录</a> ##

### <a name="app_type">APP类型</a> ###

应用名称 | 枚举值
----	|----
Iphone	| 1
Android	| 2
Web 	| 3
Wechat 	| 4
